[
  {
    "type": "BranchNode",
    "id": "root",
    "props": {
      "synthText": "Здравствуйте, меня зовут Елена! Чем я могу Вам помочь?",
      "grammar": "http://localhost/theme:graph",
      "asrOptions": "b=0&t=5000&nit=5000"
    },
    "edgeList": [
      {
        "id": "order",
        "match": [
          "заказать",
          "воду",
          "воды",
          "купить",
          "заказ"
        ]
      },
      {
        "id": "bonus",
        "match": [
          "бонус",
          "бонусы",
          "баллы"
        ]
      },
      {
        "id": "default"
      }
    ]
  },
  {
    "type": "SpecifierNode",
    "id": "order",
    "props": {
      "synthText": "Здравствуйте, меня зовут Елена! Вы начинаете оформление заказа. Скажите, пожалуйста, как я могу к Вам обращаться?",
      "grammar": "http://localhost/theme:graph",
      "asrOptions": "b=0&t=5000&nit=5000",
      "varName": "name",
      "matchFile": "russian_names.csv"
    },
    "edgeIfEmpty": {
      "id": "repeat_name"
    },
    "edgeList": {
      "id": "ask_city"
    }
  },
  {
    "type": "SpecifierNode",
    "id": "repeat_name",
    "props": {
      "synthText": "Пожалуйста, повторите, как Вас зовут?",
      "grammar": "http://localhost/theme:graph",
      "asrOptions": "b=0&t=5000&nit=5000",
      "varName": "name",
      "matchFile": "russian_names.csv"
    },
    "edgeIfEmpty": {
      "id": "skip_name"
    },
    "edgeList": {
      "id": "ask_city"
    }
  },
  {
    "id": "skip_name",
    "type": "SystemNode",
    "props": {
      "varName": "name",
      "plainText": ""
    },
    "edgeList": [
      {
        "id": "ask_city"
      }
    ]
  },
  {
    "type": "SpecifierNode",
    "id": "ask_city",
    "props": {
      "synthText": "@name#, доставка в какой город Вас интересует?",
      "grammar": "http://localhost/theme:graph",
      "asrOptions": "b=0&t=5000&nit=5000",
      "varName": "city",
      "match": [
        "Челябинск",
        "Екатеринбург",
        "Еманжелинск",
        "Златоуст",
        "Копейск",
        "Коркино",
        "Курган",
        "Кыштым",
        "Магнитогорск",
        "Миасс",
        "Озерск",
        "Чебаркуль",
        "Челябинск"
      ]
    },
    "edgeIfEmpty": {
      "id": "repeat_city"
    },
    "edgeList": {
      "id": "ask_address"
    }
  },
  {
    "type": "BranchNode",
    "id": "repeat_city",
    "props": {
      "synthText": "@name#, к сожалению названный Вами город не входит в список доступных для доставки городов. Чтобы выбрать другой город скажите «другой», чтобы продолжить с текущим, скажите «продолжить»",
      "grammar": "http://localhost/theme:graph",
      "asrOptions": "b=0&t=5000&nit=5000"
    },
    "edgeList": [
      {
        "id": "system_city",
        "match": [
          "продолжить",
          "далее",
          "дальше",
          "продолжаем"
        ]
      },
      {
        "id": "ask_city",
        "match": [
          "изменить",
          "новый",
          "другой",
          "поменять",
          "измена"
        ]
      },
      {
        "id": "ask_city"
      }
    ]
  },
  {
    "id": "system_city",
    "type": "SystemNode",
    "props": {
      "varName": "city",
      "systemVar": "rawCity"
    },
    "edgeList": [
      {
        "id": "ask_address"
      }
    ]
  },
  {
    "type": "SpecifierNode",
    "id": "ask_address",
    "props": {
      "synthText": "@name# назовите, пожалуйста, адрес доставки",
      "grammar": "http://localhost/theme:graph",
      "asrOptions": "b=0&t=5000&nit=5000",
      "varName": "address"
    },
    "edgeIfEmpty": {
      "id": "ask_time"
    },
    "edgeList": {
      "id": "ask_time"
    }
  },
  {
    "type": "SpecifierNode",
    "id": "ask_time",
    "props": {
      "synthText": "@name#, укажите, пожалуйста, удобное для Вас время доставки",
      "grammar": "http://localhost/theme:graph",
      "asrOptions": "b=0&t=5000&nit=5000",
      "varName": "time"
    },
    "edgeIfEmpty": {
      "id": "ask_phone"
    },
    "edgeList": {
      "id": "ask_phone"
    }
  },
  {
    "type": "BranchNode",
    "id": "ask_phone",
    "props": {
      "synthText": "Сохранить телефон с которого Вы звоните как контактный?",
      "grammar": "http://localhost/theme:graph",
      "asrOptions": "b=0&t=5000&nit=5000"
    },
    "edgeList": [
      {
        "id": "system_phone",
        "match": [
          "да",
          "сохранить",
          "Да",
          "текущий"
        ]
      },
      {
        "id": "new_phone",
        "match": [
          "нет",
          "не",
          "новый",
          "другой",
          "Нет"
        ]
      },
      {
        "id": "system_phone"
      }
    ]
  },
  {
    "id": "system_phone",
    "type": "SystemNode",
    "props": {
      "varName": "phone",
      "systemVar": "callerId"
    },
    "edgeList": [
      {
        "id": "summary"
      }
    ]
  },
  {
    "type": "SpecifierNode",
    "id": "new_phone",
    "props": {
      "synthText": "@name#, назовите Ваш телефон по одной цифре без кода плюс семь",
      "grammar": "http://localhost/theme:graph",
      "asrOptions": "b=0&t=5000&nit=5000",
      "varName": "phone"
    },
    "edgeIfEmpty": {
      "id": "summary"
    },
    "edgeList": {
      "id": "summary"
    }
  },
  {
    "type": "BranchNode",
    "id": "summary",
    "props": {
      "synthText": "@name#, Ваш заказ сохранён. Давайте проверим что получилось. Вас зовут @name#, Ваш город @city#, Ваш адрес @address#, время доставки @time#, телефон для связи @phone#. Если все верно скажите подтверждаю. Если нужно что-то изменить скажите например, изменить телефон",
      "grammar": "http://localhost/theme:graph",
      "asrOptions": "b=0&t=5000&nit=5000"
    },
    "edgeList": [
      {
        "id": "ask_city",
        "match": [
          "город"
        ]
      },
      {
        "id": "ask_address",
        "match": [
          "адрес",
          "улица",
          "улицу",
          "дом",
          "квартира"
        ]
      },
      {
        "id": "ask_time",
        "match": [
          "время"
        ]
      },
      {
        "id": "ask_phone",
        "match": [
          "телефон",
          "номер",
          "мобильный"
        ]
      },
      {
        "id": "end"
      }
    ]
  },
  {
    "id": "end",
    "type": "EndNode",
    "props": {
      "synthText": "Ваш заказ сохранён. В скором времени с Вами свяжется оператор"
    }
  }
]
